local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- GUI
local screenGui = Instance.new("ScreenGui", cloneref(game:GetService("CoreGui")))
screenGui.Name = "BondUI"
screenGui.ResetOnSpawn = false

local topLabel = Instance.new("TextLabel")
topLabel.Size = UDim2.new(0.3, 0, 0.1, 0)
topLabel.Position = UDim2.new(0.35, 0, 0.38, 0)
topLabel.BackgroundTransparency = 1
topLabel.TextScaled = true
topLabel.Font = Enum.Font.SourceSansBold
topLabel.TextColor3 = Color3.new(1, 1, 1)
topLabel.TextStrokeTransparency = 0.5
topLabel.Text = ""
topLabel.Parent = screenGui

local bondLabel = Instance.new("TextLabel")
bondLabel.Size = UDim2.new(0.3, 0, 0.1, 0)
bondLabel.Position = UDim2.new(0.35, 0, 0.45, 0)
bondLabel.BackgroundTransparency = 1
bondLabel.TextScaled = true
bondLabel.Font = Enum.Font.SourceSansBold
bondLabel.TextColor3 = Color3.new(1, 1, 1)
bondLabel.TextStrokeTransparency = 0.5
bondLabel.Text = "Bond Collected: 0"
bondLabel.Parent = screenGui

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local root = character:WaitForChild("HumanoidRootPart")
local lockedY = root.Position.Y

local activateRemote = ReplicatedStorage:WaitForChild("Shared")
	:WaitForChild("Network")
	:WaitForChild("RemotePromise")
	:WaitForChild("Remotes")
	:WaitForChild("C_ActivateObject")

local bondCount = 0
local bondGoal = 120

-- Lock Y axis
task.spawn(function()
	while true do
		pcall(function()
			local pos = root.Position
			root.Velocity = Vector3.new(root.Velocity.X, 0, root.Velocity.Z)
			root.CFrame = CFrame.new(pos.X, lockedY, pos.Z)
		end)
		task.wait()
	end
end)

local function findNearestBond()
	local closest, shortestDist = nil, math.huge
	for _, item in ipairs(workspace.RuntimeItems:GetDescendants()) do
		if item:IsA("Model") and item.Name:lower() == "bond" then
			local primary = item.PrimaryPart or item:FindFirstChildWhichIsA("BasePart")
			if primary then
				local dist = (primary.Position - root.Position).Magnitude
				if dist < shortestDist and dist < 100 then
					shortestDist = dist
					closest = item
				end
			end
		end
	end
	return closest
end

local function teleportTo(bond)
	local part = bond.PrimaryPart or bond:FindFirstChildWhichIsA("BasePart")
	if not part then return end
	root.CFrame = part.CFrame + Vector3.new(0, 5, 0)

	local startTime = os.clock()
	while bond.Parent and os.clock() - startTime < 1.2 do
		activateRemote:FireServer(bond)
		task.wait(0.1)
	end

	if not bond.Parent then
		bondCount += 1
		bondLabel.Text = "Bond Collected: " .. bondCount
	end
end

-- Tween with bond interrupt
local function smartTween(pos)
	local tween = TweenService:Create(root, TweenInfo.new(1, Enum.EasingStyle.Linear), {CFrame = CFrame.new(pos)})
	tween:Play()

	local startTime = os.clock()
	while os.clock() - startTime < 1 do
		local bond = findNearestBond()
		if bond then
			tween:Cancel()
			teleportTo(bond)
			return true
		end
		task.wait(0.05)
	end

	return false
end

-- Zig-zag scanner
local xRange, zStart, zEnd = 1024, 30000, -90000
local zStep = -1024
local y = -50

while bondCount < bondGoal do
	for z = zStart, zEnd, zStep do
		for direction = 1, -1, -2 do
			local xStart = direction == 1 and -xRange or xRange
			local xEnd = direction == 1 and xRange or -xRange

			if smartTween(Vector3.new(xStart, y, z)) then continue end
			if smartTween(Vector3.new(xEnd, y, z)) then continue end
		end
	end
	task.wait(1)
end

-- Show final text
topLabel.Text = "Total Bonds Collected"

task.wait(4.5)

TeleportService:Teleport(13954115420) -- Change this ID if your lobby is different
